<html>
<head>
    <title>Net_GSQ Example 2: Using protocol parsers</title>
</head>
<body>
<p>This example shows how the protocol parsers can be accessed with Net_GameServerQuery.</p>
<p>We convert a rules, status and players sample request into parsed data.</p>
<pre>
<?php
require 'Net/GameServerQuery.php';

// Raw packets from the server
$packets[] = base64_decode('/v///woPAAAC/////0VeAF90dXRvcl9ib21iX3ZpZXdhYmxlX2NoZWNrX2ludGVydmFsADAuNQBfdHV0b3JfZGVidWdfbGV2ZWwAMABfdHV0b3JfZXhhbWluZV90aW1lADAuNQBfdHV0b3JfaGludF9pbnRlcnZhbF90aW1lADEwLjAAX3R1dG9yX2xvb2tfYW5nbGUAMTAAX3R1dG9yX2xvb2tfZGlzdGFuY2UAMjAwAF90dXRvcl9tZXNzYWdlX2NoYXJhY3Rlcl9kaXNwbGF5X3RpbWVfY29lZmZpY2llbnQAMC4wNwBfdHV0b3JfbWVzc2FnZV9taW5pbXVtX2Rpc3BsYXlfdGltZQAxAF90dXRvcl9tZXNzYWdlX3JlcGVhdHMANQBfdHV0b3Jfdmlld19kaXN0YW5jZQAxMDAwAGFkbWluX2hpZ2hsYW5kZXIAMABhZG1pbl9pZ25vcmVfaW1tdW5pdHkAMABh' .
    'ZG1pbl9tb2RfdmVyc2lvbgAyLjUwLjU5IChNTSkAYWRtaW5fcXVpZXQAMABhbGxvd19jbGllbnRfZXhlYwAxAGFsbG93X3NwZWN0YXRvcnMAMS4wAGFtaV9zdl9tYXhwbGF5ZXJzADE2AGFtdl9wcml2YXRlX3NlcnZlcgAwAGNvb3AAMABkZWF0aG1hdGNoADEAZGVjYWxmcmVxdWVuY3kAMzAAZGVmYXVsdF9hY2Nlc3MAMABlZGdlZnJpY3Rpb24AMgBob3N0YWdlX2RlYnVnADAAaG9zdGFnZV9zdG9wADAAaHVtYW5zX2pvaW5fdGVhbQBhbnkAbWF4X3F1ZXJpZXNfc2VjADEAbWF4X3F1ZXJpZXNfc2VjX2dsb2JhbAAxAG1heF9xdWVyaWVzX3dpbmRvdwAxAG1ldGFtb2RfdmVyc2lvbgAxLjE3AG1wX2FsbG93bW9uc3RlcnMAMABtcF9hdXRva2ljawAwAG1wX2F1dG90ZW' .
    'FtYmFsYW5jZQAxAG1wX2J1eXRpbWUAMS41AG1wX2M0dGltZXIANDUAbXBfY2hhdHRpbWUAMTAAbXBfY29uc2lzdGVuY3kAMQBtcF9mYWRldG9ibGFjawAwAG1wX2ZsYXNobGlnaHQAMABtcF9mb290c3RlcHMAMQBtcF9mb3JjZWNhbWVyYQAwAG1wX2ZvcmNlY2hhc2VjYW0AMABtcF9mcmFnc2xlZnQAMABtcF9mcmVlemV0aW1lADcAbXBfZnJpZW5kbHlmaXJlADAAbXBfZ2hvc3RmcmVxdWVuY3kAMC40AG1wX2hvc3RhZ2VwZW5hbHR5ADMAbXBfa2lja3BlcmNlbnQAMC42NgBtcF9saW1pdHRlYW1zADEAbXBfbG9nZGV0YWlsADAAbXBfbG9nZmlsZQAxAG1wX2xvZ21lc3NhZ2VzADEAbXBfbWFwdm90ZXJhdGlvADAuNjYAbXBfbWF4cm91bmRzADAAbXBfbWlycm9yZGFt' .
    'YWdlADAAbXBfcGxheWVyaWQAMABtcF9yb3VuZHRpbWUANQBtcF9zdGFydG1vbmV5ADgwMABtcF90aW1lbGVmdAAwAG1wX3RpbWVsaW1pdAAzMABtcF90a3B1bmlzaAAwAG1wX3dpbmRpZmZlcmVuY2UAMQBtcF93aW5saW1pdAAwAHBhdXNhYmxlADAAcHVibGljX3Nsb3RzX2ZyZWUAMTYAcmVzZXJ2ZV9zbG90cwAwAHJlc2VydmVfdHlwZQAwAHN2X2FjY2VsZXJhdGUANQBzdl9haW0AMABzdl9haXJhY2NlbGVyYXRlADMAc3ZfYWlybW92ZQAxAHN2X2FsbG93dXBsb2FkADEAc3ZfYWxsdGFsawAwAHM=');
$packets[] = base64_decode('/v///woPAAASdl9ib3VuY2UAMQBzdl9jaGVhdHMAMABzdl9jbGllbnR0cmFjZQAxAHN2X2NsaXBtb2RlADAAc3ZfY29udGFjdAAAc3ZfZnJpY3Rpb24ANABzdl9ncmF2aXR5ADgwMABzdl9sb2dibG9ja3MAMABzdl9tYXhyYXRlADEwMDAwAHN2X21heHNwZWVkADkwMABzdl9taW5yYXRlADIwMDAAc3ZfcGFzc3dvcmQAMABzdl9wcm94aWVzADEAc3ZfcmVnaW9uADUAc3ZfcmVzdGFydAAwAHN2X3Jlc3RhcnRyb3VuZAAwAHN2X3N0ZXBzaXplADE4AHN2X3N0b3BzcGVlZAA3NQBzdl92b2ljZWVuYWJsZQAxAHN2X3dhdGVyYWNjZWxlcmF0ZQAxMABzdl93YXRlcmZyaWN0aW9uADEA');

// Load HalfLife protocol
$parser = Net_GameServerQuery_Process::factory('HalfLife');

// Get rules from the packet
$rules = $parser->parse('rules', $packets);

// Results
print_r($rules);

?>
</pre>
</body>
</html>